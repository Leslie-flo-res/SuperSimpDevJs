<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Function Halfway Exercises</title>
  </head>
  <body>
    <button id="text" onclick="  loadingText();">Start</button>
    <br />
    <br />
    <button onclick="addedToCart();">Add To Cart</button>
    <br />
    <p>Buttons for Title +/-</p>
    <div>
      <button id="increase">+</button>
      <button id="decrease">-</button>
    </div>

    <script>
      //12a
      const add = function () {
        console.log(2 + 3);
      };
      add();
      add();
      //12b
      function runTwice(fun) {
        fun();
        fun();
      }
      runTwice(function () {
        console.log("12b");
      });
      runTwice(add);
      //12c
      function changeText() {
        document.getElementById("text").innerText = "Finished!";
      }
      //12 d
      function loadingText() {
        document.getElementById("text").innerText = "Loading..";
        setTimeout(changeText, 1000);
      }

      //12e
      /*  let addedText;
function addedToCart(){

addedText = document.createElement('p');
addedText.textContent = 'Added';
document.body.appendChild(addedText);
setTimeout(removeAdded, 1000);
}


function removeAdded(){
  addedText.remove();
}  clean up this code by putting remove added into one function and each time its clicked each one disappears 
      function addedToCart() {
        const addedText = document.createElement("p");
        addedText.textContent = "Added";
        document.body.appendChild(addedText);
        setTimeout(function () {
          addedText.remove();
        }, 1000);
      }*/
      //12f
      let addedText;
      let timeoutID;

      function addedToCart() {
        if (!addedText) {
          addedText = document.createElement("p");
          addedText.textContent = "Added";
          document.body.appendChild(addedText);
        }
        clearTimeout(timeoutID);
        timeoutID = setTimeout(function () {
          addedText.remove();
          addedText = "";
        }, 1000);
      }
      
      
      //12g set up interval to rotate messages.
      //12h buttons to decrease and increase.

      let messages = 2;
      let showAlert = true;

      function titleChange() {
        document
          .getElementById("increase")
          .addEventListener("click", function () {
            if (messages < 10) {
              messages++;
              console.log(messages);
              updateTitle();
            }
          });

        document
          .getElementById("decrease")
          .addEventListener("click", function () {
            if (messages > 0) {
              messages--;
              updateTitle();
              console.log(messages);
            }
          });

        function updateTitle() {
          if (messages === 0) {
            document.title = "App";
          }
          if (messages > 0) {
            document.title = `(${messages}) New Messages`;
          }
        }

        console.log(messages);

        setInterval(function () {
          if (messages > 0) {
            if (showAlert) {
              document.title = `(${messages}) New Messages`;
            } else {
              document.title = "App";
            }
          }

          showAlert = !showAlert;
        }, 1000);
      } //end of function

      titleChange();
    </script>
  </body>
</html>
